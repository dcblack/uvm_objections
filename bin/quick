#!/usr/bin/perl

# -o objection trace
# -p pause
# -q quiet

my $basic_opts="-debug -o";
my $agents=3;
my $bfmobj=1;
my $monitor=1;
my $levels=5;
my $useseq=1;
my $transactions=20;
my $propagate=0;
my $repeat=1;
my $switch=1;
my $shape=0;
my $infos=20;
my $warnings=2;
my $vendor="mentor";
my $versions="1.1d 1.2";
$versions="1.2";

for my $arg (@ARGV) {
  $n=1 if $arg eq '-n';
  next unless $arg =~ m{\w=};
  $arg =~ s{=(.*)}{"$&"};
  eval "\$$arg";
}
my $cmnd=qq{bin/doit
    $basic_opts
    -V "$vendor"
    -A "$agents"
    -B "$bfmobj"
    -M "$monitor"
    -L "$levels"
    -C "$transactions"
    -R "$repeat"
    -P "$propagate"
    -U "$useseq"
    -X "$switch"
    -S "$shape"
    -I "$infos"
    -W "$warnings"
    "$versions"
};
if ($n == 1) {
  print $cmnd;
} else {
  $cmnd =~ s/\n//g;
  system $cmnd;
}
